<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
        <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
        <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css" />
        <script src="js/jquery-2.2.4.js"></script>
        <script src="js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <title>Mes radios</title>
    </head>
<body>

<div data-role="page" data-theme="b"> <!-- Début Page principale -->
  
    <div data-role="header" data-position="fixed"> <!-- Entête -->
		<span id="my_title">Mes radios</span>
	</div>
	
	<div role="main" class="ui-content"> <!-- Corps principal -->

    <ul data-role="listview" data-inset="true" id="listviewRadios"> <!-- data-theme="b"  -->
    
        <li data-role="list-divider">Liste</li>

        <li><a href="#" data-val="controlaudio1" data-name="Génération 80" id="radio1">
            <img src="img/generationhit80.png">
        <h2>Génération Hit 80</h2>
        <p><audio autoplay id="controlaudio1"><source src="http://www.radioking.com/play/generationhit80" type="audio/mpeg"></audio></p></a>
        </li>
        
        <li><a href="#" data-val="controlaudio2" data-name="MFM Radio" id="radio2">
            <img src="img/mradio.png">
        <h2>MFM Radio</h2>
        <p><audio id="controlaudio2" ><source src="http://mfmwr-010.ice.infomaniak.ch/mfmwr-010.mp3" type="audio/mpeg"></audio></p></a>
        </li>
        
        <li><a href="#" data-val="controlaudio3" data-name="Bide et Musique" id="radio3">
            <img src="img/bideetmusique.png">
        <h2>Bide et musique</h2>
        <p><audio id="controlaudio3"><source src="http://relay2.bide-et-musique.com:9200/;" type="audio/mpeg"></audio></p></a>
        </li>

        <li><a href="#" data-val="controlaudio4" data-name="Radio Classique" id="radio4">
            <img src="img/radioclassique.png">
        <h2>Radio classique</h2>
        <p><audio id="controlaudio4"><source src="http://radioclassique.ice.infomaniak.ch:80/radioclassique-high" type="audio/mpeg"></audio></p></a>
        </li>
		
        <li><a href="#" data-val="controlaudio5" data-name="France Info" id="radio5">
            <img src="img/franceinfo.png">
        <h2>France Info</h2>
        <p><audio id="controlaudio5"><source src="http://direct.franceinfo.fr/live/franceinfo-hifi.aac" type="audio/mpeg"></audio></p></a>
        </li>
        
        <li><a href="#" data-val="controlaudio6" data-name="Made in 80" id="radio6">
            <img src="img/madein80.png">
        <h2>Made in 80</h2>
        <p><audio id="controlaudio6"><source src="https://madein80.leswebradios.fr/stream#" type="audio/mpeg"></audio></p></a>
        </li>	

    </ul>

    </div>
	
	<div data-role="footer" data-position="fixed"><!-- Pied de page -->
	
	         <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
	</div>
	
<script type="text/javascript"> <!-- Quelques fonctions -->

    $(document).bind('pageinit', function() /* Lorsque la page est initialisée */
	{

        console.log("pageinit");

		function jouer(id,name)
		{
			console.log("jouer id="+id);
			
			document.getElementById('controlaudio1').pause();
			document.getElementById('controlaudio2').pause();
			document.getElementById('controlaudio3').pause();
			document.getElementById('controlaudio4').pause();	
			document.getElementById('controlaudio5').pause();
			document.getElementById('controlaudio6').pause();
			
			if ( document.getElementById(id).paused )
			{
				document.getElementById(id).play();
				$("#my_title").text('Vous écoutez ' + name);
			}
			else
				document.getElementById(id).pause();           
		
		}
	
        $('#listviewRadios a').click(function()
		{
			var id = $(this).data('val');
			var name = $(this).data('name');

            try
            {
                // $(this).attr("data-theme", "f").removeClass("ui-btn-up-b").addClass("ui-btn-up-f");
                $(this).attr("data-theme", "b").removeClass("ui-btn-up-b").addClass("ui-btn-up-a");
            }
            catch(e)
            {
                console.log("Error trying addClass on #listviewRadios");
            }
                    
            console.log("Vous avez cliqué sur " + id + "de nom" + name);
			jouer(id, name);
        });
        
        $('#listviewRadios li' ).click(function()
        {
            console.log("#listviewRadios li' click event");
            // $(this).attr('data-theme','d');
            $(this).attr("data-theme", "b").removeClass("ui-btn-up-b").addClass("ui-btn-up-a");
        });

    });

</script>
	
</div> <!-- Fin Page principale -->

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
</body>
</html>
